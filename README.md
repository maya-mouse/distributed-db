# LAB 1 — Apache Kafka Performance Research

##  Опис лабораторної роботи

Лабораторна робота присвячена **дослідженню продуктивності Apache Kafka**  
у контексті **атомних електростанцій (4 реактори)**.  
Мета — визначити оптимальні параметри *batch-обробки, компресії та масштабування*  
для підвищення **ефективності, надійності та економії дискового простору**  
в аналітичних сценаріях (*Focus B*).

---

##  Конфігурація

| Параметр | Опис |
|-----------|------|
| **Система** | Атомна електростанція (4 реактори) |
| **ОС та середовище** | Windows 11 Pro, Kafka 3.7.1 |
| **Архітектура** | Single-Broker |
| **Тип даних** | 256 байт JSON (`neutron_flux`, `pressure`, `rod_position`) |
| **Фокус (B)** | Аналітичний — *batch analytics & historical data* (Compression Ratio / Disk Utilization) |

---

##  Експериментальні результати

###  Batching & Latency (Real-time vs. Batch)

| Конфігурація (Batch, Linger) | Records/sec | Avg Latency (мс) | Висновок |
|-------------------------------|--------------|------------------|-----------|
| 16KB, 0ms *(Real-time)* | 63,052 | 174.63 |  Надто висока латенція для критичних алертів (<10 мс) |
| 64KB, 10ms *(Balanced)* | 102,249 | 4.05 |  Найкращий баланс між latency та throughput |
| 1MB, 100ms *(Focus B)* | 91,408 | 57.07 |  Оптимально для batch-аналітики (мінімізація мережевих викликів) |

---

###  Compression (Focus B: Disk Utilization)

| Алгоритм | Records/sec | Compression Ratio | Висновок |
|-----------|--------------|------------------|-----------|
| **none** | 82,372 | 0% | Базова лінія для критичних алертів |
| **snappy** | 68,966 | 16% | Найкращий компроміс між швидкістю і стисненням |
| **zstd** | 71,327 | 13% |  Неоптимально — виграш CR не компенсує latency |

---

###  Scaling & Lag Monitoring

| Тест | Результат | Висновок |
|------|------------|-----------|
| **Scaling (3 → 9 Partitions)** | Scaling Factor = 1.14x | Система насичена, оптимально — 3 партиції для 4 реакторів |
| **Consumer Lag** | LAG = 1022 повідомлення | Потрібне масштабування Consumer Layer (≥3 інстанси) |

---

##  Висновки та рекомендації

- **Надійність:**  
  Використовувати *Multi-Broker* архітектуру (`replication-factor=3`) і `acks=all` для гарантованої доставки.  

- **Аналітична оптимізація:**  
  Великі батчі *(1MB, 100 мс)* + **Snappy** компресія → до **16% економії дискового простору**.  

- **Масштабування споживачів:**  
  Запустити **Consumer Group ≥ 3** інстанси для паралельної обробки даних.  

- **Баланс:**  
  Пріоритет *Latency* — для критичних сигналів,  
  *Throughput / Disk Utilization* — для пакетної аналітики.

---

